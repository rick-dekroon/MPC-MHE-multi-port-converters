# Automated MPC and MHE compensator design for multi-port converter architectures

## Description

To ensure balance on the distribution grid and avoid overloads, owners of residential PV installations are incentivized to maximize their self-consumption. As it is difficult to match the consumption and production directly in time, photovoltaic (PV) battery systems are developed to store the excess of energy when the solar production is high and the consumption is low and release this energy again when the situation reverses. Currently, two topologies are dominating the market. The AC coupled system displayed in Figure 1a is mostly used in retrofit installations where a battery is wanted while a PV system is already in place. Completely separate AC/DC and DC/DC converters are used to couple the solar panel string and battery to the grid. The DC coupled system shown in Figure 1b, is mostly used in newer installations. The coupling between PV and battery is no longer achieved at the AC side but moved to the DC side. Both PV and battery have their own DC/DC converter but only a single DC/AC converter is used for the connection to the grid. Doing this eliminated one AC/DC converter, generally making the system less expensive and more efficient as two conversion steps are eliminated when charging the battery [1]. Next to these two commercial topologies also a third topology is emerging, the so called Multiple Input Multiple Output (MIMO) converters. Here the number of components and conversion steps is reduced even further by sharing active and passive components between the DC/DC converters, because of this no distinct DC bus is present anymore as shown in Figure 1c [2].

<div align="center">
  <img src="https://github.com/user-attachments/assets/769d76e6-9e8f-467e-a7b7-9b66854896c8" alt="Figure 1" width="900">
  <p align="left"><b>Figure 1:</b> schematical representation of a) an AC coupled b) DC coupled and c) MIMO converter PV battery system.</p>
</div>

To acquire these new topologies, a framework has been built which generates the different connection possibilities of the converter components as shown in Figure 2. The framework starts with valid structures which are filled in with components, avoiding short circuits. By applying the Kirchoff current and voltage laws (KCL and KVL), the feasible topologies with the required voltage relations can be identified and the unsuitable combinations can be removed. 

<table style="width:100%;">
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/7c3ab96f-46e7-472a-bf4e-c9328d5b7c3a" alt="Subfigure 1" width="400"><br>
      a)
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/ca3023cb-5092-4600-aad6-240ddfaa70d8" alt="Subfigure 2" width="500"><br>
      b)
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/63fdc11f-82a3-4f45-a4a3-cc911edb18ac" alt="Subfigure 3" width="300"><br>
      c)
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/873e3ae3-3f03-425a-8a5d-695123b0af62" alt="Subfigure 4" width="600"><br>
      d)
    </td>
  </tr>
</table>
<p align="left"><b>Figure 2:</b> schematical representation of the converter derivation methodology. a) The valid structures for connecting the wanted number of components are generated. b) Components are inserted into the structures without creating short circuits. c) The directional characteristics of the components are considered, and short circuits are removed. d) The KCL and KVL are applied to check if the wanted voltage relations can be achieved resulting in the final circuit.</p>

After the derivation of these converters, it is still needed to develop the control strategies for the active devices. Currently this is a manual effort in which the different switching modes are identified and PID controllers are tuned to achieve a satisfactory response. This thesis aims to develop a strategy to automatically develops these control strategies for the different converters generated by the initial framework.

The student will start with developing a control strategy for a single MIMO converter, decoupling the energy flows between the different ports. When a good controller for this initial topology is achieved, the student will try to generalize the used approach.

## References

[1]	S. Ravyts, M. D. Vecchia, G. V. den Broeck, and J. Driesen, “Review on building-integrated photovoltaics electrical system requirements and module-integrated converter recommendations,” Energies, vol. 12, p. 1532, apr 2019.

[2] 	S. Danyali, S. H. Hosseini, and G. B. Gharehpetian, “New extendable single-stage multi-input DC–DC/AC boost converter,” IEEE Transactions on Power Electronics, vol. 29, pp. 775–788, feb 2014.
